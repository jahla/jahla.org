<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Applescripts for iTunes via Alfred App</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Your New Jekyll Site</a></h1>
              <a class="extra" href="/">home</a>
            </div>

                <h2>Applescripts for iTunes via Alfred App</h2>
<p class="meta">09 Sep 2013</p>

<div class="post">
<p>Sometimes iTunes can be frustrating, especially if you have large amounts of music to sort through and possibly trash. Personally, I like to do this while working on something else, so I don&#39;t want to have to go through the whole process of sorting and deleting manually.</p>

<p>Like (I assume) many DJs and music lovers, I have a lot of music. But I don&#39;t want to have to stop, go to iTunes, skip through the offending song to check it doesn&#39;t get better, ctrl+click Show in Finder, cmd+del, cmd-tab iTunes, ctrl+click Show in Playlist&gt; Music, delete from iTunes libraryâ€¦</p>

<p>Wouldn&#39;t it be great if there was a way to do all this from a hotkey from any application? A way that didn&#39;t require any other input, so you didn&#39;t have to pause what you were doing elsewhere? </p>

<p>As it turns out, one way of doing this is by setting global hotkeys in <a href="http://www.alfredapp.com/">Alfred.app</a> which trigger applescripts to deal with iTunes. Note that these actions are done using applescripts, but if you don&#39;t want to have to put ugly shortcuts in your global scripts menu or switch to another app to run the scripts, you need some way of setting a global hotkey. This is where alfred.app comes in, although you need the paid powerpack version to create custom workflows and hotkeys. </p>

<p><dl>
<dt>Kill current track</dt>
<dd>Deletes current iTunes track from iTunes, file to trash. Plays next. <em>Use carefully, no confirmation dialogue</em></dd></p>

<div class="highlight"><pre><code class="applescript"><span class="k">global</span> <span class="nv">addenda</span>
<span class="k">tell</span> <span class="nb">application</span> <span class="s2">&quot;iTunes&quot;</span>
    <span class="k">if</span> <span class="nv">player</span> <span class="na">state</span> <span class="ow">is not</span> <span class="nv">stopped</span> <span class="k">then</span>
        <span class="k">set</span> <span class="nv">ofi</span> <span class="k">to</span> <span class="nv">fixed</span> <span class="nv">indexing</span>
        <span class="k">set</span> <span class="nv">fixed</span> <span class="nv">indexing</span> <span class="k">to</span> <span class="no">true</span>
        <span class="k">try</span>
            <span class="k">set</span> <span class="nv">dbid</span> <span class="k">to</span> <span class="nv">database</span> <span class="nv">ID</span> <span class="k">of</span> <span class="nv">current</span> <span class="nv">track</span>
            <span class="k">set</span> <span class="nv">cla</span> <span class="k">to</span> <span class="na">class</span> <span class="k">of</span> <span class="nv">current</span> <span class="nv">track</span>
            <span class="k">try</span>
                <span class="k">set</span> <span class="nv">floc</span> <span class="k">to</span> <span class="p">(</span><span class="k">get</span> <span class="na">location</span> <span class="k">of</span> <span class="nv">current</span> <span class="nv">track</span><span class="p">)</span>
            <span class="k">end</span> <span class="k">try</span>
            <span class="k">try</span>
                <span class="nb">delete</span> <span class="p">(</span><span class="nb">some</span> <span class="nv">track</span> <span class="k">of</span> <span class="nv">library</span> <span class="nv">playlist</span> <span class="mi">1</span> <span class="nb">whose</span> <span class="nv">database</span> <span class="nv">ID</span> <span class="ow">is</span> <span class="nv">dbid</span><span class="p">)</span>
            <span class="k">end</span> <span class="k">try</span>
            <span class="k">set</span> <span class="nv">addenda</span> <span class="k">to</span> <span class="s2">&quot;Done. The track has been deleted.&quot;</span>
            <span class="k">if</span> <span class="nv">cla</span> <span class="ow">is</span> <span class="nv">file</span> <span class="nv">track</span> <span class="k">then</span>
                <span class="k">set</span> <span class="k">my</span> <span class="nv">addenda</span> <span class="k">to</span> <span class="s2">&quot;Done. The track has been deleted and its file has been moved to the Trash.&quot;</span>
                <span class="k">my</span> <span class="nv">delete_the_file</span><span class="p">(</span><span class="nv">floc</span><span class="p">)</span>
            <span class="k">end</span> <span class="k">if</span>
        <span class="nb">on</span> <span class="k">error</span>
            <span class="k">set</span> <span class="nv">addenda</span> <span class="k">to</span> <span class="s2">&quot;The track could not be deleted.&quot;</span>
        <span class="k">end</span> <span class="k">try</span>
        <span class="k">set</span> <span class="nv">fixed</span> <span class="nv">indexing</span> <span class="k">to</span> <span class="nv">ofi</span>
    <span class="k">end</span> <span class="k">if</span>
    <span class="nv">next</span> <span class="nv">track</span>
    <span class="nb">play</span>
<span class="k">end</span> <span class="k">tell</span>
<span class="k">to</span> <span class="nv">delete_the_file</span><span class="p">(</span><span class="nv">floc</span><span class="p">)</span>
    <span class="k">try</span>
        <span class="c">-- tell application &quot;Finder&quot; to delete floc</span>
        <span class="nb">do shell script</span> <span class="s2">&quot;mv &quot;</span> <span class="o">&amp;</span> <span class="nb">quoted form</span> <span class="k">of</span> <span class="nv">POSIX</span> <span class="na">path</span> <span class="k">of</span> <span class="p">(</span><span class="nv">floc</span> <span class="k">as </span><span class="nc">string</span><span class="p">)</span> <span class="o">&amp;</span> <span class="s2">&quot; &quot;</span> <span class="o">&amp;</span> <span class="nb">quoted form</span> <span class="k">of</span> <span class="nv">POSIX</span> <span class="na">path</span> <span class="k">of</span> <span class="p">(</span><span class="nb">path to</span> <span class="nv">trash</span> <span class="k">as </span><span class="nc">string</span><span class="p">)</span>
    <span class="nb">on</span> <span class="k">error</span>
        <span class="k">set</span> <span class="nv">addenda</span> <span class="k">to</span> <span class="s2">&quot;Done. However, the file could not be moved to the Trash.&quot;</span>
    <span class="k">end</span> <span class="k">try</span>
<span class="k">end</span> <span class="nv">delete_the_file</span>
</code></pre></div>

<p><dt>Playback position</dt>
<dd>Applescript to skip forwards and backwards in currently playing iTunes track. In this example, the script tells iTunes to skip back 20 seconds</dd></p>

<div class="highlight"><pre><code class="applescript"><span class="k">tell</span> <span class="nb">application</span> <span class="s2">&quot;iTunes&quot;</span>
    <span class="k">if</span> <span class="nv">player</span> <span class="na">state</span> <span class="ow">is</span> <span class="nv">stopped</span> <span class="k">then</span> <span class="no">return</span>
    <span class="k">try</span>
        <span class="k">set</span> <span class="nv">player</span> <span class="na">position</span> <span class="k">to</span> <span class="p">(</span><span class="k">get</span> <span class="nv">player</span> <span class="na">position</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">)</span>
    <span class="k">end</span> <span class="k">try</span>
<span class="k">end</span> <span class="k">tell</span>
</code></pre></div>

</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Jahla Gato<br />
                  Geek, armchair philosopher, fashion designer<br />
                  jahla@jahla.org
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/yourusername/">github.com/jahla</a><br />
                  <a href="http://twitter.com/yourusername/">twitter.com/jahlagato</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
